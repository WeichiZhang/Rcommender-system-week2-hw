<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content-Based Movie Recommender</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: #fdbb2d;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .instructions {
            font-size: 1.2rem;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.6;
        }
        
        .selection-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        select {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border-radius: 8px;
            border: none;
            background-color: #2c3e50;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        select:hover {
            background-color: #34495e;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        button {
            padding: 15px 40px;
            font-size: 1.2rem;
            background: linear-gradient(to right, #e44d26, #f16529);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            background: linear-gradient(to right, #f16529, #e44d26);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .result-box {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            min-height: 200px;
        }
        
        #result {
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .movie-card {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            border-radius: 10px;
            padding: 15px;
            transition: transform 0.3s ease;
        }
        
        .movie-card:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .movie-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fdbb2d;
        }
        
        .movie-genres {
            font-size: 0.9rem;
            color: #ecf0f1;
        }
        
        .similarity {
            display: block;
            margin-top: 10px;
            padding: 5px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }
        
        .loading {
            text-align: center;
            font-size: 1.5rem;
            margin: 30px 0;
        }
        
        .spinner {
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 5px solid #fdbb2d;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .movie-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Content-Based Movie Recommender</h1>
            <p class="instructions">Select a movie you like, and we'll find similar ones for you based on genre similarity!</p>
        </header>
        
        <div class="selection-area">
            <select id="movie-select">
                <option value="">-- Select a Movie --</option>
                <!-- Options will be populated by JavaScript -->
            </select>
            
            <button onclick="getRecommendations()">Get Recommendations</button>
        </div>
        
        <div class="result-box">
            <p id="result">Your recommendations will appear here...</p>
            <!-- Results will be displayed here -->
        </div>
    </div>
    
    <footer>
        <p>Content-Based Movie Recommender &copy; 2023 | Using Cosine Similarity</p>
    </footer>

    <script>
        // In a real implementation, this would be in data.js
        // Mock movie data (in a real app, this would be loaded from u.item)
        const movies = [
            { id: 1, title: "Toy Story (1995)", genres: ["Animation", "Children's", "Comedy"] },
            { id: 2, title: "Jumanji (1995)", genres: ["Adventure", "Children's", "Fantasy"] },
            { id: 3, title: "Grumpier Old Men (1995)", genres: ["Comedy", "Romance"] },
            { id: 4, title: "Waiting to Exhale (1995)", genres: ["Comedy", "Drama"] },
            { id: 5, title: "Father of the Bride Part II (1995)", genres: ["Comedy"] },
            { id: 6, title: "Heat (1995)", genres: ["Action", "Crime", "Thriller"] },
            { id: 7, title: "Sabrina (1995)", genres: ["Comedy", "Romance"] },
            { id: 8, title: "Tom and Huck (1995)", genres: ["Adventure", "Children's"] },
            { id: 9, title: "Sudden Death (1995)", genres: ["Action"] },
            { id: 10, title: "GoldenEye (1995)", genres: ["Action", "Adventure", "Thriller"] },
            { id: 11, title: "The American President (1995)", genres: ["Comedy", "Drama", "Romance"] },
            { id: 12, title: "Dracula: Dead and Loving It (1995)", genres: ["Comedy", "Horror"] },
            { id: 13, title: "Balto (1995)", genres: ["Animation", "Children's"] },
            { id: 14, title: "Nixon (1995)", genres: ["Drama"] },
            { id: 15, title: "Cutthroat Island (1995)", genres: ["Action", "Adventure", "Romance"] }
        ];

        // All possible genres
        const allGenres = [
            "Action", "Adventure", "Animation", "Children's", "Comedy", "Crime", 
            "Documentary", "Drama", "Fantasy", "Film-Noir", "Horror", "Musical", 
            "Mystery", "Romance", "Sci-Fi", "Thriller", "War", "Western"
        ];

        // Populate the dropdown on page load
        document.addEventListener('DOMContentLoaded', function() {
            const movieSelect = document.getElementById('movie-select');
            
            movies.forEach(movie => {
                const option = document.createElement('option');
                option.value = movie.id;
                option.textContent = movie.title;
                movieSelect.appendChild(option);
            });
        });

        // Calculate cosine similarity between two movies
        function cosineSimilarity(movie1, movie2) {
            // Create genre vectors
            const vector1 = allGenres.map(genre => movie1.genres.includes(genre) ? 1 : 0);
            const vector2 = allGenres.map(genre => movie2.genres.includes(genre) ? 1 : 0);
            
            // Calculate dot product
            let dotProduct = 0;
            for (let i = 0; i < vector1.length; i++) {
                dotProduct += vector1[i] * vector2[i];
            }
            
            // Calculate magnitudes
            const magnitude1 = Math.sqrt(vector1.reduce((sum, val) => sum + val * val, 0));
            const magnitude2 = Math.sqrt(vector2.reduce((sum, val) => sum + val * val, 0));
            
            // Avoid division by zero
            if (magnitude1 === 0 || magnitude2 === 0) {
                return 0;
            }
            
            return dotProduct / (magnitude1 * magnitude2);
        }

        // Get recommendations based on selected movie
        function getRecommendations() {
            const selectedMovieId = document.getElementById('movie-select').value;
            
            if (!selectedMovieId) {
                alert("Please select a movie first!");
                return;
            }
            
            // Show loading state
            const resultElement = document.getElementById('result');
            resultElement.innerHTML = '<div class="loading">Finding recommendations<div class="spinner"></div></div>';
            
            // Simulate loading delay (would be removed in production)
            setTimeout(() => {
                const selectedMovie = movies.find(movie => movie.id === parseInt(selectedMovieId));
                
                // Calculate similarity scores for all movies
                const moviesWithScores = movies.map(movie => {
                    if (movie.id === selectedMovie.id) {
                        return { ...movie, similarity: 1 }; // Same movie
                    }
                    
                    const similarity = cosineSimilarity(selectedMovie, movie);
                    return { ...movie, similarity };
                });
                
                // Sort by similarity (descending) and exclude the selected movie
                const recommendedMovies = moviesWithScores
                    .filter(movie => movie.id !== selectedMovie.id)
                    .sort((a, b) => b.similarity - a.similarity)
                    .slice(0, 5); // Get top 5 recommendations
                
                // Display results
                let resultsHTML = `<h2>Movies similar to "${selectedMovie.title}":</h2>`;
                resultsHTML += '<div class="movie-grid">';
                
                recommendedMovies.forEach(movie => {
                    resultsHTML += `
                        <div class="movie-card">
                            <div class="movie-title">${movie.title}</div>
                            <div class="movie-genres">${movie.genres.join(', ')}</div>
                            <span class="similarity">Similarity: ${(movie.similarity * 100).toFixed(1)}%</span>
                        </div>
                    `;
                });
                
                resultsHTML += '</div>';
                resultElement.innerHTML = resultsHTML;
            }, 1500); // Simulated loading delay
        }
    </script>
</body>
</html>
